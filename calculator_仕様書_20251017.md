# 電卓プログラム 仕様書

バージョン: 0.1  
作成日: [2025/10/17]  
作成者: [作成者名 / 松本経理ビジネス専門学校 Team A ]  
リポジトリ: [mkeiri-pc202/_calculator](https://github.com/mkeiri-pc202/_calculator)

---

## 1. 概要
松本経理ビジネス専門学校の職業訓練の一環として、Pythonを使用したプログラムの作成を通じて、プログラミングの理解を深めることを目的として作成する

### 1.1 目的
- 電卓の機能の動作を目的として作成する
  - 四則演算（加算、減算、乗算、除算）、ルート、パーセンテージ、丸括弧（）、クリア(C)、小数点以下の計算
  - 数字、演算子のキーボード入力

---

## 2. 用語定義
- 数値 1,2,3 など
- 演算子,: +, -, ×, ÷ など

---

## 3. 高レベル要件（目的・目標）
- 正確さ: 標準的な数値表現で正しい結果を返す
- 耐久性: 異常入力に対して、アプリの終了やフリーズがなく、エラーを返す

---

## 4. 機能要件
<img width="377" height="552" alt="Image" src="https://github.com/user-attachments/assets/ba23ecda-da43-433c-9ab4-041a7fc008e2" />


### 4.1 基本機能
- 加算 (a + b)
- 減算 (a - b)
- 乗算 (a * b)
- 除算 (a / b) — 0 除算時は文字列'エラー'を返す
- 小数の取り扱い
- 演算子優先順位（乗除が加減より優先）
- 括弧によるグルーピング ( )を使用する
- 画面のクリア　CボタンのクリックまたはBackspace

### 4.2 追加機能
- 平方根（√）
- パーセンテージ(%)
- 正負（負数）の入力と計算

### 4.3 非機能要件
- 精度: 文字列19桁まで対応する
- セキュリティ: sympifyを使用する（悪意のあるコードの実行を避けるため、evalの使用を避けた）

---

## 5. ユーザーインターフェース（UI / UX）
- tkinterを使用して作成した

### 5.1 コマンドライン (CLI)
- 起動方法: 未対応
  app.pyを実行すれば起動する

### 5.2 GUI / Web
- 起動方法:app.exeを実行する
- 表示要素: 電卓が表示される
- キーボード操作: クリックまたは数値キーで入力、=キーまたはEnterで確定、Backspace、Cでクリア

---

## 6. 入出力仕様

### 6.1 入力形式
- 文字列式（例: "3 + 4 * (2 - 1)"）
- 実数表現のルール（小数点記号は利用可、指数表記は未対応）

### 6.2 出力形式
- デフォルト: 数値（例: 7）
- エラー時: 文字列'エラー'を返す

---

## 7. エラー処理とメッセージ
- すべてのエラーに対して、文字列'エラー'を返す

---

## 8. 入力例
- 入力: "2+3*4" → 出力: 14
- 入力: "(1+2)/3" → 出力: 1
- 入力: "10/0" → 出力: エラー
- 入力: 10%  → 出力: 0.1
- 入力: 10±  → 出力: (-10)
- 入力: (-10)± → 出力: 10
- 入力: √2 → 出力: 1.4142...

---

## 9. 内部設計（アーキテクチャ）
- モジュール構成
  - app.py(ボタンの作成、結果表示画面の作成、ボタンとキーボードの紐づけ）
  - calc.py(計算の実行）
  - click_event.py(入力された文字列を計算可能な値に変換）
  - utils.py(calc.pyで作成したデータの受け取り) 

### 9.1 データフロー（簡易）
入力 → click_event.py（文字列で入力されたデータを加工)→ 確定（イコールまたはEnterキーの入力）→ calc.py(入力されたデータから計算を行う) 
→utils.py(calc.pyで作成したデータの受け取り)  → 出力表示

---

## 10. テスト計画
- ユニットテスト（単体テスト）
  - 機能別の演算の正しさテスト
  　
 
- 統合テスト
  - なし（フローが単純なのでユニットテストで網羅できてしまうため）
    
- 回帰テスト
  - なし（やらなきゃいけない）

テストデータ例:
- 正常系: "3+5", "2*(3+4)", "1.5+2.25"
- 異常系: ")", "2++2", "10/0"

---

## 11. 受け入れ基準
- 定義された基本機能が全て正常に動作すること
- 重大なエラー（クラッシュ、未処理例外）がないこと
- 仕様書が整備されていること

---

## 12. ロードマップ / バージョニング
- v0.1: 四則演算（加算、減算、乗算、除算）、ルート、パーセンテージ、丸括弧（）、クリア(C)、小数点以下の計算
- 今後のバージョンアップは未定（職業訓練の過程修了のため）
---

## 13. ビルド・実行方法
- OS	Windows 11
- 言語 / Python 3.13
- 使用ツール	VSCode
- フレームワーク	tkinter / sympy 1.14.0
- 仮想環境	conda

---

## 14. 依存関係
- Python 3.13　/ sympy 1.14.0 

---

## 15. セキュリティと注意点
- 入力式をそのまま eval に流用しない
- 外部からの式評価時にコマンド実行が起きないようにする（電卓で使用する数値または演算子のみを許可する）

---

（終わり）
